<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>LSR Trading Dashboard</title>
<script src="https://unpkg.com/lightweight-charts@4.1.3/dist/lightweight-charts.standalone.production.js"></script>
<style>
:root {
  --bg: #0d1117; --card: #161b22; --border: #30363d;
  --text: #e6edf3; --dim: #8b949e; --green: #3fb950; --red: #f85149;
  --blue: #58a6ff; --yellow: #d29922; --orange: #db6d28;
  --font: 'JetBrains Mono', 'Fira Code', 'Consolas', monospace;
}
* { margin:0; padding:0; box-sizing:border-box; }
body { background:var(--bg); color:var(--text); font-family:var(--font); font-size:13px; padding:12px; }
h2 { font-size:13px; font-weight:600; color:var(--dim); text-transform:uppercase; letter-spacing:1px; margin-bottom:10px; }

.dashboard { display:grid; grid-template-columns:1fr 1fr; gap:12px; max-width:1400px; margin:0 auto; }
.full { grid-column: 1 / -1; }
.card { background:var(--card); border:1px solid var(--border); border-radius:8px; padding:16px; }

/* Header */
.header { display:flex; justify-content:space-between; align-items:center; flex-wrap:wrap; gap:12px; }
.header-left { display:flex; align-items:center; gap:16px; }
.header h1 { font-size:18px; font-weight:700; color:var(--blue); }
.badge { padding:3px 10px; border-radius:12px; font-size:11px; font-weight:700; text-transform:uppercase; }
.badge-running { background:rgba(63,185,80,0.15); color:var(--green); }
.badge-offline { background:rgba(248,81,73,0.15); color:var(--red); }
.badge-unknown { background:rgba(139,148,158,0.15); color:var(--dim); }

/* Stats row */
.stats { display:flex; gap:20px; flex-wrap:wrap; }
.stat { text-align:right; }
.stat-label { font-size:10px; color:var(--dim); text-transform:uppercase; letter-spacing:0.5px; }
.stat-val { font-size:20px; font-weight:700; }
.stat-val.pos { color:var(--green); }
.stat-val.neg { color:var(--red); }
.stat-val.dim { color:var(--dim); font-size:11px; }

/* Instrument cards */
.instruments { display:grid; grid-template-columns:repeat(auto-fill, minmax(200px, 1fr)); gap:8px; }
.inst { background:var(--bg); border:1px solid var(--border); border-radius:6px; padding:12px; }
.inst-sym { font-size:16px; font-weight:700; color:var(--blue); margin-bottom:2px; }
.inst-price { font-size:22px; font-weight:700; margin-bottom:8px; letter-spacing:-0.5px; }
.inst-row { display:flex; justify-content:space-between; margin:2px 0; }
.inst-label { color:var(--dim); font-size:11px; }
.inst-val { font-weight:600; }
.pdh { color:var(--green); }
.pdl { color:var(--red); }
.pdc { color:var(--yellow); }

/* Positions */
.pos-row { display:flex; justify-content:space-between; align-items:center; padding:10px 0; border-bottom:1px solid var(--border); }
.pos-row:last-child { border:none; }
.pos-info { display:flex; gap:12px; align-items:center; }
.pos-sym { font-weight:700; font-size:15px; }
.pos-dir { font-size:11px; font-weight:700; padding:2px 8px; border-radius:4px; }
.pos-long { background:rgba(63,185,80,0.15); color:var(--green); }
.pos-short { background:rgba(248,81,73,0.15); color:var(--red); }
.pos-detail { font-size:11px; color:var(--dim); line-height:1.5; }
.pos-pnl { font-size:18px; font-weight:700; text-align:right; }

/* Trade log */
.trade-row { display:flex; justify-content:space-between; align-items:center; padding:8px 0; border-bottom:1px solid var(--border); font-size:12px; }
.trade-row:last-child { border:none; }
.trade-left { display:flex; gap:10px; align-items:center; }
.trade-sym { font-weight:700; width:30px; }
.trade-side { font-size:10px; font-weight:700; padding:1px 6px; border-radius:3px; }
.trade-meta { color:var(--dim); font-size:11px; }
.trade-pnl { font-weight:700; }
.trade-status { font-size:10px; font-weight:600; padding:2px 6px; border-radius:3px; }
.st-open { background:rgba(88,166,255,0.15); color:var(--blue); }
.st-closed { background:rgba(63,185,80,0.1); color:var(--dim); }
.st-pending { background:rgba(210,153,34,0.15); color:var(--yellow); }
.st-cancelled { background:rgba(139,148,158,0.1); color:var(--dim); }

/* Signal feed */
.signal-feed { max-height:260px; overflow-y:auto; font-size:11px; line-height:1.7; }
.sig { padding:2px 4px; border-bottom:1px solid rgba(48,54,61,0.4); }

/* Win/Loss summary bar */
.summary-bar { display:flex; gap:16px; align-items:center; margin-bottom:12px; font-size:12px; }
.summary-stat { display:flex; align-items:center; gap:4px; }
.summary-dot { width:8px; height:8px; border-radius:50%; display:inline-block; }

/* Footer */
.footer { text-align:center; color:var(--dim); font-size:10px; padding:8px; }

::-webkit-scrollbar { width:5px; }
::-webkit-scrollbar-track { background:var(--bg); }
::-webkit-scrollbar-thumb { background:var(--border); border-radius:3px; }

@media (max-width:768px) {
  body { padding:6px; font-size:12px; }
  .dashboard { grid-template-columns:1fr; gap:8px; }
  .header { flex-direction:column; align-items:flex-start; }
  .stats { gap:8px; width:100%; justify-content:space-between; }
  .stat { text-align:center; flex:1; }
  .stat-val { font-size:16px; }
  .instruments { grid-template-columns:repeat(2, 1fr); gap:6px; }
  .inst { padding:8px; }
  .inst-sym { font-size:14px; }
  .inst-price { font-size:18px; }
  .pos-pnl { font-size:14px; }
  .hide-m { display:none; }
  .chart-wrap { height:300px; }
}

/* Chart */
.chart-wrap { height:450px; position:relative; }
.chart-btns { display:flex; gap:6px; margin-bottom:10px; flex-wrap:wrap; }
.chart-btn { background:var(--bg); border:1px solid var(--border); color:var(--dim); padding:4px 14px;
  border-radius:4px; cursor:pointer; font-family:var(--font); font-size:12px; font-weight:600; }
.chart-btn.active { background:rgba(88,166,255,0.15); color:var(--blue); border-color:var(--blue); }
.chart-btn:hover { border-color:var(--blue); }
.tf-btns { display:flex; gap:4px; margin-left:auto; }
.tf-btn { background:var(--bg); border:1px solid var(--border); color:var(--dim); padding:3px 8px;
  border-radius:3px; cursor:pointer; font-family:var(--font); font-size:10px; }
.tf-btn.active { color:var(--blue); border-color:var(--blue); }
</style>
</head>
<body>

<!-- Header -->
<div class="card full header" style="margin-bottom:12px;">
  <div class="header-left">
    <h1>‚ö° LSR Dashboard</h1>
    <span id="badge" class="badge badge-unknown">‚Äî</span>
  </div>
  <div class="stats">
    <div class="stat"><div class="stat-label">Balance</div><div class="stat-val" id="balance">‚Äî</div></div>
    <div class="stat"><div class="stat-label">Realized</div><div class="stat-val" id="realized">‚Äî</div></div>
    <div class="stat"><div class="stat-label">Unrealized</div><div class="stat-val" id="unrealized">‚Äî</div></div>
    <div class="stat"><div class="stat-label">Positions</div><div class="stat-val" id="posCount">0</div></div>
    <div class="stat"><div class="stat-label">Updated</div><div class="stat-val dim" id="updated">‚Äî</div></div>
  </div>
</div>

<div class="dashboard">
  <!-- Instruments -->
  <div class="card full">
    <h2>üìä Instruments</h2>
    <div class="instruments" id="instruments"><div style="color:var(--dim)">Loading‚Ä¶</div></div>
  </div>

  <!-- Chart -->
  <div class="card full">
    <div style="display:flex;align-items:center;justify-content:space-between;flex-wrap:wrap;gap:8px;">
      <h2 style="margin:0;">üìà Chart</h2>
      <div style="display:flex;gap:6px;align-items:center;flex-wrap:wrap;">
        <div class="chart-btns" id="chart-btns"></div>
        <div class="tf-btns">
          <button class="tf-btn" data-tf="1m">1m</button>
          <button class="tf-btn active" data-tf="5m">5m</button>
          <button class="tf-btn" data-tf="15m">15m</button>
          <button class="tf-btn" data-tf="1h">1h</button>
        </div>
      </div>
    </div>
    <div class="chart-wrap" id="chart-container"></div>
  </div>

  <!-- Positions -->
  <div class="card">
    <h2>üìç Open Positions</h2>
    <div id="positions"><div style="color:var(--dim)">Loading‚Ä¶</div></div>
  </div>

  <!-- Session Trades -->
  <div class="card">
    <h2>üìã Session Trades</h2>
    <div class="summary-bar" id="summary"></div>
    <div id="trades" style="max-height:320px;overflow-y:auto;"><div style="color:var(--dim)">Loading‚Ä¶</div></div>
  </div>

  <!-- Signal Feed -->
  <div class="card full">
    <h2>üì° Activity Feed</h2>
    <div class="signal-feed" id="signals"><div style="color:var(--dim)">Loading‚Ä¶</div></div>
  </div>

  <!-- Swing Points -->
  <div class="card full">
    <h2>üéØ Swing Points</h2>
    <div class="signal-feed" id="swingPoints"><div style="color:var(--dim)">Loading‚Ä¶</div></div>
  </div>
</div>

<div class="footer">LSR Trading Dashboard ‚Ä¢ Real-time WS ‚Ä¢ Chart 60s</div>

<script src="app.js"></script>
</body>
</html>
